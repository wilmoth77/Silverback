<section class="sb-docs-section intro">
  <header>
    <h2 class="section-intro-heading">Table Navigation</h2>
    <p>Proof of concept JavaScript solution using <code>onkeydown</code> events with <code>previousElementSibling</code> and <code>nextElementSibling</code> properties. </p>
  </header>
</section>

<style>
.table-nav-active {
  color: #fff !important;
}
  tr.table-nav-active {
    background-color: green !important;
  }
  td.table-nav-active {
    background-color: blue !important;
  }
</style>

<script type="text/javascript">
// tr row example

$(document).ready(function () {

  var startTr = document.getElementById('startTr');

  startTr.focus();
  $(startTr).addClass( "table-nav-active" );


  function dotheneedful(sibling) {
    if (sibling != null) {
      startTr.focus();
      $(startTr).removeClass( "table-nav-active" );
      sibling.focus();
      $(sibling).addClass( "table-nav-active" );
      startTr = sibling;
    }
  }

  document.onkeydown = checkKey;

  function checkKey(e) {
    e = e || window.event;
    if (e.keyCode == '38') {
      // up arrow
      var sibling = startTr.previousElementSibling;
      dotheneedful(sibling);
    } else if (e.keyCode == '40') {
      // down arrow
      var sibling = startTr.nextElementSibling;
      dotheneedful(sibling);
    }
  }
});
</script>


<div class="panel panel-montane">
  <div class="panel-heading">
    <div class="panel-heading-content">
      <div class="heading-content-left">
        <h3 class="panel-title">Table row <small>(<code>&lt;tr&gt;</code>)</small> navigation</h3>
      </div>
    </div>
  </div>
  <div class="panel-body">
    <p>
      Use the <i class="mdi mdi-arrow-up-bold"></i> and <i class="mdi mdi-arrow-down-bold"></i> keys to navigate the table rows.
    </p>
    <table class="table table-striped table-montane">
      <thead>
        <tr>
          <th>Column One</th>
          <th>Column Two</th>
          <th>Column Three</th>
          <th>Column Four</th>
        </tr>
      </thead>
      <tbody>
        <tr id='startTr'>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
        </tr>
        <tr>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
        </tr>
        <tr>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <td>13</td>
          <td>14</td>
          <td>15</td>
          <td>16</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="panel-footer">
    <div class="panel-footer-content">
      <div class="footer-content-left">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#slvrbck-modal-lg">Table cell example</button>
      </div>
    </div>
  </div>
</div>

<!-- Large modal content -->
<div class="modal fade slvrbck-example-modal-lg" id="slvrbck-modal-lg" role="dialog" tabindex="-1">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom-color: transparent"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
        <h4 class="modal-title">Table cell example</h4>
      </div>
      <div class="modal-body">
        <script type="text/javascript">
        // td cell example

        $('#slvrbck-modal-lg').on('show.bs.modal', function (e) {
          var start = document.getElementById('start');

          start.focus();
          $(start).addClass( "table-nav-active" );


          function dotheneedful(sibling) {
            if (sibling != null) {
              start.focus();
              $(start).removeClass( "table-nav-active" );
              sibling.focus();
              $(sibling).addClass( "table-nav-active" );
              start = sibling;
            }
          }

          document.onkeydown = checkKey;

          function checkKey(e) {
            e = e || window.event;
            if (e.keyCode == '38') {
              // up arrow
              var idx = start.cellIndex;
              var nextrow = start.parentElement.previousElementSibling;
              if (nextrow != null) {
                var sibling = nextrow.cells[idx];
                dotheneedful(sibling);
              }
            } else if (e.keyCode == '40') {
              // down arrow
              var idx = start.cellIndex;
              var nextrow = start.parentElement.nextElementSibling;
              if (nextrow != null) {
                var sibling = nextrow.cells[idx];
                dotheneedful(sibling);
              }
            } else if (e.keyCode == '37') {
              // left arrow
              var sibling = start.previousElementSibling;
              dotheneedful(sibling);
            } else if (e.keyCode == '39') {
              // right arrow
              var sibling = start.nextElementSibling;
              dotheneedful(sibling);
            }
          }
        })

        // When modal closes
        $('#slvrbck-modal-lg').on('hidden.bs.modal', function (e) {
          // reset the focus in both examples
          var resetStyle = document.getElementsByClassName('table-nav-active');
          $(resetStyle).removeClass('table-nav-active');

          // Start over
          var startTr = document.getElementById('startTr');

          startTr.focus();
          $(startTr).addClass( "table-nav-active" );


          function dotheneedful(sibling) {
            if (sibling != null) {
              startTr.focus();
              $(startTr).removeClass( "table-nav-active" );
              sibling.focus();
              $(sibling).addClass( "table-nav-active" );
              startTr = sibling;
            }
          }

          document.onkeydown = checkKey;

          function checkKey(e) {
            e = e || window.event;
            if (e.keyCode == '38') {
              // up arrow
              var sibling = startTr.previousElementSibling;
              dotheneedful(sibling);
            } else if (e.keyCode == '40') {
              // down arrow
              var sibling = startTr.nextElementSibling;
              dotheneedful(sibling);
            }
          }

        });

        // When modal closes
        $('#slvrbck-modal-lg').on('hidden.bs.modal', function (e) {


        });
        </script>

        <div class="panel panel-montane">
          <div class="panel-heading">
            <div class="panel-heading-content">
              <div class="heading-content-left">
                <h3 class="panel-title">Table cell <small>(<code>&lt;td&gt;</code>)</small> navigation</h3>
              </div>
            </div>
          </div>
          <div class="panel-body">
            <p>
              Use the <i class="mdi mdi-arrow-up-bold"></i> <i class="mdi mdi-arrow-down-bold"></i> <i class="mdi mdi-arrow-left-bold"></i> and <i class="mdi mdi-arrow-right-bold"></i> keys to navigate the table cells.
            </p>
            <table class="table table-striped table-montane">
              <thead>
                <tr>
                  <th>Column One</th>
                  <th>Column Two</th>
                  <th>Column Three</th>
                  <th>Column Four</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id='start'>1</td>
                  <td>2</td>
                  <td>3</td>
                  <td>4</td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>6</td>
                  <td>7</td>
                  <td>8</td>
                </tr>
                <tr>
                  <td>9</td>
                  <td>10</td>
                  <td>11</td>
                  <td>12</td>
                </tr>
                <tr>
                  <td>13</td>
                  <td>14</td>
                  <td>15</td>
                  <td>16</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="modal-footer"> <button type="button" class="btn btn-outline-default" data-dismiss="modal">Close</button> </div>
    </div>
  </div>
</div>
